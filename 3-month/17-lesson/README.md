# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Ññ17

## Docker

- –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ–±—Ä–∞–∑ nginx –Ω–∞ –±–∞–∑–µ alpine. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ nginx –¥–æ–ª–∂–µ–Ω –æ—Ç–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É nginx)
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º –∏ –æ–±—Ä–∞–∑–æ–º
- –í—ã–≤–æ–¥ –æ–ø–∏—à–∏—Ç–µ –≤ –¥–æ–º–∞—à–Ω–µ–º –∑–∞–¥–∞–Ω–∏–∏.
- –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å: –ú–æ–∂–Ω–æ –ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–æ–±—Ä–∞—Ç—å —è–¥—Ä–æ?
- –°–æ–±—Ä–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—à–∏—Ç—å –≤ docker hub –∏ –¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

---

–ó–∞–¥–∞–Ω–∏–µ —Å–æ `*` (–∑–≤–µ–∑–¥–æ—á–∫–æ–π)

- –°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ–±—Ä–∞–∑—ã nginx –∏ php, –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ –∏—Ö –≤ docker-compose.
- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ nginx –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å php info.
- –í—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ docker hub

## –†–µ—à–µ–Ω–∏–µ

–°–Ω–∞—á–∞–ª–∞ –æ—Ç–≤–µ—Ç–∏–º –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:

### –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

- –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É **docker container** –∏ **docker image**.

**–û–±—Ä–∞–∑ Docker** —è–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–π –∏–ª–∏ —á–µ—Ä—Ç–µ–∂–æ–º –¥–ª—è **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Docker**. –ö–æ–≥–¥–∞ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–∫–µ—Ä–∞, –¥–æ–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∞ –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Å–ª–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ –Ω–∞ –µ–≥–æ –æ—Å–Ω–æ–≤–µ.

 –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–º–µ–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏ –∫–∞–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–º–∞–Ω–¥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –û–±—Ä–∞–∑ –ø–æ—Ö–æ–∂ –Ω–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä - –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —ç—Ç–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è.

–ï—Å–ª–∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–≤–∞—Ç—å—Å—è –û–û–ü —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —è –ø–æ–Ω–∏–º–∞—é —ç—Ç–æ –∫–∞–∫ _class_ –∏ _instance_ –∫–ª–∞—Å—Å–∞ –≤ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –≥–¥–µ —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç –æ–±—ä–µ–∫—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–ª–∞—Å—Å–∞, –Ω–æ –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω.
–ò—Å—Ç–æ—á–Ω–∏–∫ <https://habr.com/ru/post/272145/>

---

- –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å: –ú–æ–∂–Ω–æ –ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–æ–±—Ä–∞—Ç—å —è–¥—Ä–æ?

–î–∞, —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ!

–ù–æ –∫–æ–≥–¥–∞ –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —è–¥—Ä–∞ –∏ –Ω–µ –±–æ–ª–µ–µ —Ç–æ–≥–æ. –≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–∫–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —è–¥—Ä–æ –û–° —Ö–æ—Å—Ç–∞. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä Docker –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —è–¥—Ä–∞ —Ö–æ—Å—Ç–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω, cgroups, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ —Ç.–¥.

–ù–æ –µ—Å–ª–∏ –º—ã –Ω–µ —Ö–æ—Ç–∏–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å—Ä–µ–¥—É —Å–±–æ—Ä–∫–∏ –≤ –û–° —Ö–æ—Å—Ç–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ –¥–æ–∫–µ—Ä–∞ —Å —Ç–∞–∫–æ–π —Å—Ä–µ–¥–æ–π –¥–ª—è —Å–±–æ—Ä–∫–∏ —è–¥—Ä–∞. –ó–∞—Ç–µ–º –Ω–æ–≤–æ–µ —è–¥—Ä–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ –û–° **host's**. –ò –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–æ–Ω—É—Å–∞ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â—É—é—Å—è —Å—Ä–µ–¥—É –¥–ª—è —Å–±–æ—Ä–∫–∏ —è–¥—Ä–∞.

### –°–æ–∑–¥–∞–π—Ç–µ –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –æ–±—Ä–∞–∑ nginx

–°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä [NGINX](./docker/README.md)

#### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è NGINX

```shell
cd ./docker
```

–°–æ–∑–¥–∞—ë–º —Å–µ—Ç—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```shell
docker network create my-network --subnet 172.24.24.0/24
```

–ó–∞–ø—É—Å–∫–∞–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ docker-compose:

```shell
docker-compose up -d
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```shell
curl 127.0.0.1:8080/index.html
```

```log
It's a default static site üòá
```

–û—á–∏—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–¥–µ–Ω–∏—è:

```shell
docker-compose down
```

### Nginx –∏ php-fpm

–°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä [NGINX-PHP](./docker-compose/README.md)

#### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è NGINX-PHP

```shell
cd ./docker-compose
```

–ó–∞–ø—É—Å–∫–∞–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ docker-compose:

```shell
docker-compose up -d
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```shell
curl 127.0.0.1:8080/phpinfo.php
```

–∏–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ <http://127.0.0.1:8080/phpinfo.php>

–û—á–∏—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–¥–µ–Ω–∏—è

```shell
docker network rm my-network
docker network rm backend
docker-compose down
```
