# Домашнее задание №11

## Автоматизация администрирования. Ansible

Подготовить стенд на Vagrant как минимум с одним сервером. На этом сервере используя Ansible необходимо развернуть nginx со следующими условиями:

- необходимо использовать модуль yum/apt
- конфигурационные файлы должны быть взяты из шаблона jinja2 с перемененными
- после установки nginx должен быть в режиме enabled в systemd
- должен быть использован notify для старта nginx после установки
- сайт должен слушать на нестандартном порту - 8080, для этого использовать переменные в Ansible

Домашнее задание считается принятым, если:

- предоставлен Vagrantfile и готовый playbook/роль ( инструкция по запуску стенда, если посчитаете необходимым )
- после запуска стенда nginx доступен на порту 8080
- при написании playbook/роли соблюдены перечисленные в задании условия

## Выполнение

- Ansible роль nginx [ansible-role-nginx](./roles/ansible-role-nginx/)
- Описание роли nginx [documentation](./roles/ansible-role-nginx/README.md)
- Запуск тестов с помощью molecule [description](./ANSIBLE.md)

## Vagrant

Создаём виртуальное окружение с ansible со следующими параметрами:

```shell
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

Запускаем виртуальное окружение:

```shell
vagrant up
```

Проверяем результат:

```shell
curl 127.0.0.1:8081
```

Вывод:

```shell
less11-ansible-stage  ^_^
```

Проверяем результат:

```shell
curl 127.0.0.1:8082
```

Вывод

```shell
less11-ansible-prod  ^_^
```
